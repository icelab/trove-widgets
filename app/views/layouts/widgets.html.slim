doctype html
html lang='en'

  head
    meta charset='utf-8'
    title Trove widget
    = stylesheet_link_tag 'widgets/application'
    = javascript_include_tag  'widgets/application'

    css:
      html, .widget__header-logo, .search__field, .search__button {
        background-color: #{params[:background]};
      }
      .widget__inner, .search__field {
        border-color: #{params[:border]};
      }
      body {
        color: #{params[:text]};
      }
      p.item__stats, .widget__credits, p.navigator__list-stats, p.usage__list-stats {
        color: #{params[:subtitle]};
      }
      ::-webkit-input-placeholder {
        color: #{params[:subtitle]};
      }
      :-moz-placeholder {
        color: #{params[:subtitle]};
      }
      ::-moz-placeholder {
        color: #{params[:subtitle]};
      }
      :-ms-input-placeholder {
        color: #{params[:subtitle]};
      }
      h1.item__title, h1.navigator__title, h1.usage__title, strong.navigator__list-title, strong.usage__list-title, strong.navigator__list-title a, strong.usage__list-title a {
        color: #{params[:title]}
      }

  body

    = content_tag :div, class: 'widget', data: data_params, role: 'trove-widget__wrapper' do
      .widget__inner style="height:#{params[:height].to_i-42}px;"
        .widget__header
          b #{data_params[:heading]}
          = link_to 'Trove', 'http://trove.nla.gov.au/', title: "#{data_params[:heading]}", target: :blank, class: 'widget__header-logo'
        .widget__body
          .widget__preload role='trove-widget__preload'= yield
          .widget__credits class="widget__credits--#{params[:type]}-#{params[:view]}" #{params[:credits]}
